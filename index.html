<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>GEMINI 3D: HYPERSPACE</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; user-select: none; }
        #hud {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #00ffcc;
            font-family: 'Segoe UI', sans-serif;
            font-size: 20px;
            z-index: 10;
            text-shadow: 0 0 10px #00ffcc;
            pointer-events: none;
        }
        #start-screen {
            position: absolute;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            font-family: 'Segoe UI', sans-serif;
            z-index: 20;
        }
        h1 { font-size: 60px; margin: 0; color: #ff0055; text-shadow: 0 0 20px red; letter-spacing: 5px; }
        p { font-size: 18px; color: #ccc; }
        button {
            padding: 15px 50px;
            background: transparent;
            border: 2px solid #00ffcc;
            color: #00ffcc;
            font-size: 20px;
            cursor: pointer;
            margin-top: 20px;
            transition: 0.3s;
            text-transform: uppercase;
            font-weight: bold;
            box-shadow: 0 0 15px #00ffcc;
        }
        button:hover { background: #00ffcc; color: black; box-shadow: 0 0 40px #00ffcc; }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>

    <div id="hud">
        SKOR: <span id="score">0</span><br>
        HIZ: <span id="speed">0</span> km/s
    </div>

    <div id="start-screen">
        <h1>HYPER RUN 3D</h1>
        <p>Mouse ile gemiyi yÃ¶net. KÄ±rmÄ±zÄ± bloklardan kaÃ§.</p>
        <button onclick="initGame()">MOTORLARI Ã‡ALIÅžTIR</button>
    </div>

    <script>
        let scene, camera, renderer;
        let player;
        let obstacles = [];
        let stars = [];
        let score = 0;
        let gameSpeed = 0.5;
        let isGameOver = false;
        let animationId;
        let mouseX = 0;
        let mouseY = 0;
        const obstacleColor = 0xff0055;
        const playerColor = 0x00ffff;

        function initGame() {
            document.getElementById('start-screen').style.display = 'none';
            
            // 1. SAHNE KURULUMU
            scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0x000000, 0.015); // Derinlik hissi iÃ§in sis

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;
            camera.position.y = 2;

            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio); // YÃ¼ksek Ã§Ã¶zÃ¼nÃ¼rlÃ¼k
            document.body.appendChild(renderer.domElement);

            // 2. OYUNCU GEMÄ°SÄ° (Low Poly Jet)
            const geometry = new THREE.ConeGeometry(0.5, 2, 8);
            geometry.rotateX(Math.PI / 2); // Yatay Ã§evir
            const material = new THREE.MeshPhongMaterial({ 
                color: playerColor, 
                emissive: 0x0044aa,
                shininess: 100,
                flatShading: true
            });
            player = new THREE.Mesh(geometry, material);
            scene.add(player);

            // Motor Alevi (Basit bir Ä±ÅŸÄ±k)
            const engineLight = new THREE.PointLight(0x00ffff, 1, 10);
            engineLight.position.set(0, 0, 1);
            player.add(engineLight);

            // 3. ZEMÄ°N (Grid Efekti)
            const gridHelper = new THREE.GridHelper(200, 50, 0x222222, 0x111111);
            gridHelper.position.y = -2;
            scene.add(gridHelper);

            // 4. IÅžIKLANDIRMA
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);
            
            const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);
            dirLight.position.set(5, 10, 7);
            scene.add(dirLight);

            // 5. YILDIZLAR (Arkaplan)
            addStars();

            // Event Listeners
            document.addEventListener('mousemove', onDocumentMouseMove, false);
            window.addEventListener('resize', onWindowResize, false);

            // Oyunu BaÅŸlat
            isGameOver = false;
            score = 0;
            gameSpeed = 0.5;
            animate();
            
            // Engel oluÅŸturma dÃ¶ngÃ¼sÃ¼
            setInterval(spawnObstacle, 1000);
        }

        function addStars() {
            const starGeo = new THREE.BufferGeometry();
            const starCount = 2000;
            const posArray = new Float32Array(starCount * 3);
            
            for(let i = 0; i < starCount * 3; i++) {
                posArray[i] = (Math.random() - 0.5) * 100; // Rastgele daÄŸÄ±t
            }
            
            starGeo.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
            const starMat = new THREE.PointsMaterial({size: 0.1, color: 0xffffff});
            const starMesh = new THREE.Points(starGeo, starMat);
            scene.add(starMesh);
            stars.push(starMesh);
        }

        function spawnObstacle() {
            if (isGameOver) return;

            const geometry = new THREE.BoxGeometry(1, 1, 1);
            // Cyberpunk kenar Ã§izgileri
            const edges = new THREE.EdgesGeometry(geometry);
            const line = new THREE.LineSegments(edges, new THREE.LineBasicMaterial({ color: 0xff0000 }));
            
            // Ä°Ã§ dolgu
            const material = new THREE.MeshPhongMaterial({ color: 0x220000, transparent: true, opacity: 0.8 });
            const cube = new THREE.Mesh(geometry, material);
            
            cube.add(line); // Ã‡izgileri kÃ¼pÃ¼n Ã¼zerine ekle

            // Rastgele pozisyon (Ufuktan gelmesi iÃ§in Z ekseninde uzaÄŸa koyuyoruz)
            cube.position.z = -50; 
            cube.position.x = (Math.random() - 0.5) * 10; 
            cube.position.y = (Math.random() - 0.5) * 6;
            
            scene.add(cube);
            obstacles.push(cube);
            
            // Oyun hÄ±zlandÄ±kÃ§a daha sÄ±k engel gelsin
            gameSpeed += 0.001;
        }

        function onDocumentMouseMove(event) {
            // Mouse koordinatlarÄ±nÄ± -1 ile +1 arasÄ±na normalize et
            mouseX = (event.clientX / window.innerWidth) * 2 - 1;
            mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            if (isGameOver) return;
            animationId = requestAnimationFrame(animate);

            // Gemi Hareketi (Mouse'u yumuÅŸak takip et - Lerp)
            player.position.x += (mouseX * 5 - player.position.x) * 0.1;
            player.position.y += (mouseY * 3 - player.position.y) * 0.1;
            
            // Gemiyi hareket yÃ¶nÃ¼ne doÄŸru eÄŸ (Banking effect)
            player.rotation.z = -player.position.x * 0.5; 
            player.rotation.x = player.position.y * 0.2;

            // Kamera Takibi (Dinamik his iÃ§in)
            camera.position.x += (player.position.x * 0.5 - camera.position.x) * 0.05;
            camera.position.y += (player.position.y * 0.5 + 1 - camera.position.y) * 0.05;

            // Engelleri Hareket Ettir
            for (let i = obstacles.length - 1; i >= 0; i--) {
                let obs = obstacles[i];
                obs.position.z += gameSpeed; // Bize doÄŸru gel
                
                // DÃ¶ndÃ¼r (GÃ¶rsel ÅŸov)
                obs.rotation.x += 0.02;
                obs.rotation.y += 0.02;

                // Ã‡arpÄ±ÅŸma KontrolÃ¼ (Basit mesafe kontrolÃ¼)
                let dist = player.position.distanceTo(obs.position);
                if (dist < 1.2) {
                    gameOver();
                }

                // Ekrandan Ã§Ä±ktÄ±ysa sil ve puan ver
                if (obs.position.z > 5) {
                    scene.remove(obs);
                    obstacles.splice(i, 1);
                    score += 100;
                    document.getElementById('score').innerText = score;
                    document.getElementById('speed').innerText = Math.floor(gameSpeed * 1000);
                }
            }

            // YÄ±ldÄ±zlarÄ± Hareket Ettir (Warp Drive hissi)
            stars.forEach(star => {
                star.position.z += gameSpeed / 2;
                if(star.position.z > 20) star.position.z = -20;
            });

            renderer.render(scene, camera);
        }

        function gameOver() {
            isGameOver = true;
            cancelAnimationFrame(animationId);
            
            // Patlama efekti yerine basit bir uyarÄ± (Kod uzunluÄŸunu aÅŸmamak iÃ§in)
            alert("ðŸ’¥ Ã‡ARPTIN! \nSKORUN: " + score);
            location.reload(); // SayfayÄ± yenile
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>5 Dakika Rahatla — Minimal</title>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<style>
@keyframes breath {0%{transform:scale(0.85);}50%{transform:scale(1.07);}100%{transform:scale(0.85);}}
.animate-breath{animation:breath 6s ease-in-out infinite;}
</style>
</head>
<body class="bg-blue-50 min-h-screen p-4">
<div id="root"></div>
<script type="text/babel">
const firebaseConfig={
  apiKey:"AIzaSyAj45jq9Eam5MNYgnwJVpzsmikeuqaqA34",
  authDomain:"isoo-5264a.firebaseapp.com",
  databaseURL:"https://isoo-5264a-default-rtdb.firebaseio.com",
  projectId:"isoo-5264a",
  storageBucket:"isoo-5264a.firebasestorage.app",
  messagingSenderId:"92451505899",
  appId:"1:92451505899:web:f03fff4ef2dea12ca960ae",
  measurementId:"G-XRK1RSCK8X"
};
firebase.initializeApp(firebaseConfig);
const db=firebase.database();

function uid(){return Math.random().toString(36).slice(2,9);}
function timeAgo(ts){const diff=Date.now()-ts;const mins=Math.floor(diff/60000);if(mins<1)return"az önce";if(mins<60)return`${mins} dk önce`;const h=Math.floor(mins/60);if(h<24)return`${h} saat önce`;return`${Math.floor(h/24)} gün önce`;}

function App(){
const [posts,setPosts]=React.useState([]);
const [text,setText]=React.useState("");
const [replyText,setReplyText]=React.useState("");
const [selected,setSelected]=React.useState(null);

React.useEffect(()=>{
  db.ref('posts').on('value',snapshot=>{
    const val=snapshot.val()||{};
    const arr=Object.keys(val).map(k=>({id:k,...val[k]}));
    arr.sort((a,b)=>b.ts - a.ts);
    setPosts(arr);
  });
},[]);

function addPost(){if(!text.trim())return;db.ref('posts').push().set({text:text.trim(),ts:Date.now(),replies:{}});setText("");}
function addReply(postId){if(!replyText.trim())return;db.ref(`posts/${postId}/replies`).push().set({id:uid(),text:replyText,ts:Date.now()});setReplyText("");setSelected(null);}

return(<div className="max-w-2xl mx-auto">
<h1 className="text-xl font-bold mb-4">5 Dakika Rahatla — Minimal</h1>
<textarea rows="2" value={text} onChange={e=>setText(e.target.value)} className="w-full border p-2 rounded" placeholder="Mesajınızı yazın"></textarea>
<button onClick={addPost} className="mt-2 px-3 py-1 bg-green-600 text-white rounded">Gönder</button>
<div className="mt-4 space-y-2">
{posts.map(p=>(<div key={p.id} className="p-2 border rounded bg-white">
<div>{p.text}</div><div className="text-xs text-gray-500">{timeAgo(p.ts)}</div>
<button onClick={()=>setSelected(p.id)} className="text-xs mt-1 border rounded px-2 py-1">Yanıtla</button>
{selected===p.id&&(<div className="mt-1">
<textarea rows="1" value={replyText} onChange={e=>setReplyText(e.target.value)} className="w-full border p-1 rounded" placeholder="Yanıtınızı yazın"></textarea>
<button onClick={()=>addReply(p.id)} className="mt-1 px-2 py-1 bg-blue-600 text-white rounded text-sm">Gönder</button>
</div>)}
{p.replies&&Object.values(p.replies).map(r=>(<div key={r.id} className="text-sm text-gray-700 mt-1 pl-2 border-l">{r.text} <span className="text-xs text-gray-400">{timeAgo(r.ts)}</span></div>))}
</div>))}
</div>
</div>);
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>
</body>
</html>
